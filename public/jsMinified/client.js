async function loginSubmit(e){e.preventDefault();let r=Object.fromEntries(new FormData(e.target).entries());(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.username)||/^09\d{9}$/.test(r.username))&&/^[1-6]\d{11}$/.test(r.lrn)&&r.password||console.log("Invalid login data (client)");try{let t=await fetch("profile/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r),credentials:"include"}),o=await t.json();if(t.ok){document.querySelector(".main-form-message").classList.add("_noDisplay"),location.reload();return}document.querySelector(".main-form-message").innerText=o.message,document.querySelector(".main-form-message").classList.remove("_noDisplay");return}catch(s){console.error(s)}}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("js/service-worker.js").then(e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)},e=>{console.log("ServiceWorker registration failed: ",e)})}),document.querySelector(".main").style.setProperty("background",`url(images/circles/${Math.floor(10*Math.random())+1}.svg) no-repeat top left / cover`),document.querySelector("._logout").addEventListener("click",()=>{fetch("/profile/logout",{method:"post",credentials:"include"}).then(e=>{e.status}).catch(e=>{console.error(e)})}),document.querySelectorAll(".help-item-button").forEach(e=>{e.addEventListener("click",e=>{let r=e.currentTarget.nextElementSibling;"block"==r.style.display?(r.style.setProperty("display","none"),e.currentTarget.querySelector(".material-symbols-rounded").innerText="arrow_drop_down"):(r.style.setProperty("display","block"),e.currentTarget.querySelector(".material-symbols-rounded").innerText="arrow_drop_up")})});